<html>


<head>
    <!-- <script src="https://colorjs.io/dist/color.js"></script> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js" integrity="sha512-zInFF17qBFVvvvFpIfeBzo7Tj7+rQxLeTJDmbxjBz5/zIr89YVbTNelNhdTT+/DCrxoVzBeUPVFJsczKbB7sew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

</head>
<body>

</body>
<script type="module">

    import Color from "https://colorjs.io/dist/color.js";
    // import Chroma from "https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js";
   
    function ColorToHex(color) {
  var hexadecimal = color.toString(16);
  return hexadecimal.length == 1 ? "0" + hexadecimal : hexadecimal;
}

function ConvertRGBtoHex(red, green, blue) {
  return "#" + ColorToHex(red) + ColorToHex(green) + ColorToHex(blue);
}

    function palletteCreate() {


        var l_list  = [];
        var c_list  = [];


        var l_min    = 70;
        var l_step   = -5;
        var l_count  = 9;

        var c_min   = 36;
        var c_step  = -3;
        var c_count  = 9;



        var l_min    = 90;
        var l_step   = -5;
        var l_count  = 9;

        var c_min   = 15;
        var c_step  = +5;
        var c_count  = 9;





        for (let i = 0; i < l_count; i ++) {
        
            let l_cur = l_min + i * l_step;
            let c_cur = c_min + i * c_step;

            l_list.push(l_cur);
            c_list.push(c_cur);
        
        };


        // var l_list  = [ 95,  90,  85,  80,  75,  70,  65,  60,  55,  50,  45,  40,  35,  30,  25]
        // var l_list   = [ 75,  60,  50,  40,  30,  20,  10]
        // var l_list   = [ 90,  80,  70,  60,  50,  40,  30,  20,  10]
        // var l_list   = [ 90,  80,  70,  60,  50,  40,  30,  20,  10]
        // var l_list  = [ 70,  65,  60,  55,  50,  45,  40,  35,  30,  25,  20,  15,  10]

        // var l_list   = [ 90,  80,  70,  60,  50,  40,  30,  20,  10]
        // var c_list  = [ 20,  25,  30,  35,  40,  35,  30,  25,  20]

        // var c_list  = [  5,  15,  25,  35,  45,  55,  65,  75,  85,  95, 105, 115, 125, 135, 145]
        // var c_list  = [ 35,  35,  30,  25,  20,  15,  10]
        // var c_list  = [ 10,  20,  30,  40,  50,  60,  70,  80,  90]
        // var c_list  = [ 20,  25,  30,  35,  40,  35,  30,  25,  20]
        // var c_list  = [ 70,  65,  60,  55,  50,  45,  40,  35,  30,  25,  20,  15,  10]


        var h_min   = 10;
        var h_max   = 360;
        var h_step  = 10;

        var cell_size = 24;

        const body = document.body;
        const palette = document.createElement('table');
        
            var pallette_width = l_list.length * cell_size;
            // palette.style.width = '240px';
            palette.style.width = pallette_width + 'p x';
            palette.style.border = '1px solid white';



        for (let i = h_min; i <= h_max; i += h_step) {

            const swatch_row = palette.insertRow();
            swatch_row.style.height = '24px';
            swatch_row.style.width = '240px';
            const label_row = palette.insertRow();
            label_row.style.height = '24px';
            label_row.style.width = '240px';

            for (let j = 0; j <= l_list.length-1; j ++) {


                // let l = "50%";
                // let c = "80";
                let l = l_list[j].toString();
                let c = c_list[j].toString();
                let h = i.toString();
                let s = "lch(" + l + "% " + c + " " + h + ")";
                let color = new Color(s);
                // let col = chroma.lch(l, c, h);




                color.inGamut();
                color.inGamut("srgb");
                let color_srgb = color.to("srgb");
                let color_argb = color.to("a98rgb");
                color_srgb.inGamut();


                // console.log(color_srgb);
                console.log(color_srgb.inGamut());

                if (color_srgb.inGamut() == false){
                    color_srgb.srgb.red = 255;
                    color_srgb.srgb.green = 255;
                    color_srgb.srgb.blue = 255;

                }
                if (color_argb.inGamut() == false){
                    color_argb.a98rgb.red = 0;
                    color_argb.a98rgb.green = 0;
                    color_argb.a98rgb.blue = 0;

                }


                let col = chroma(l_list[j], c_list[j], i, 'lch');

                console.log(col.rgb());

                let bo = chroma.valid(col.rgb());
                console.log(bo);

                let col_css = col.css();



                let color_hex = ConvertRGBtoHex(color_srgb.srgb.red, color_srgb.srgb.green, color_srgb.srgb.blue);

                const swatch_div = document.createElement("div");
                swatch_div.style.backgroundColor = color_srgb.toString({precision: 3});
                swatch_div.style.width = '100%';
                swatch_div.style.height = '100%';

                const swatch = swatch_row.insertCell();
                //swatch.appendChild(document.createTextNode(` `));
                swatch.appendChild(swatch_div);

                const label = label_row.insertCell();

                // label.appendChild(document.createTextNode(color_hex));
                label.appendChild(document.createTextNode('#000000'));
                label.style.fontSize = '12px';

                //label




                swatch.style.border = '1px solid white';
                swatch.style.width = '24px';
                swatch.style.height = '24px';
                //swatch.style.backgroundColor = color_srgb.toString({precision: 3});


            }

            
        
        }

        body.appendChild(palette);


    }

    palletteCreate();


//     function tableCreate() {

//         const body = document.body,
//         tbl = document.createElement('table');
//         tbl.style.width = '100px';
//         tbl.style.border = '1px solid black';

//         for (let i = 0; i < 3; i++) {
//             const tr = tbl.insertRow();

//             for (let j = 0; j < 2; j++) {
//                 if (i === 2 && j === 1) {
//                     break;
//                 } else {
//                     const td = tr.insertCell();
//                     td.appendChild(document.createTextNode(`Cell I${i}/J${j}`));
//                     td.style.border = '1px solid black';
//                     if (i === 1 && j === 1) {
//                     td.setAttribute('rowSpan', '2');
//                     }
//                 }
//             }
//         }
//         body.appendChild(tbl);
//     }

// tableCreate();

</script>
</html>